---
sudo: false
dist: trusty
language: node_js
node_js:
  - '10'

cache:
  directories:
    - node_modules

before_install:
  - touch package.json

install:
  - make install
  - make precompile

script:
  - make lint
  - make test

# after_success:
  # - make coverage
  # - cat coverage/lcov.info | node_modules/.bin/coveralls

env:
  global:
    # GH_TOKEN
    - secure: my0JkDLACSVxoUZp94fw8fCDod5y++DSg3Y3Kr89UMibpRPyTOSUNuoJvDKbX/bm+0ADjtR4QbI34dtQvrjs0chJGvDwlwTZRXsGXEwLWim44XjXB5hKuSEIdr5wLgc2zzfvRwUa9bmTGIFFlDz5s8wB9rgfc2yXxF6/4FJ0QjBVE+g2mOR5PD0Wg93tw6wn9BjrERPS0avMbxBJz1oBZcnogVFOKeVi+1vkYSdp8OHQyOA8wINQMrMFYt5pOufyZ/5zObf8UJMgYEgiC6QIas4yEcpj3IGHfmLYhPjnyPC4pdlosOzCutLXsKvFjngMF4LwghH7veEGSPW6rpIKgYgpBrWIgydTb+B8bNRMoKxLpjhY2ymk1m/fisBg9a6v3xIGQoysIvS+em1AJfz07AO0UMmwnnjw4iPUAaO0Cz+2tjDL5W1xESWZvLEEiqDjiMrig8nR0NQKocaPWZ0Cn8EyLdwX898VISPqcOpWIHTNftxA+rMsz+BjaIgBOyru0TfgdEXr1s3T1OzrNKvFLMdqykw12kDPcAFOpk8SmfEuwIfaZkNXmtv2N4mrkuws9nfloyWWHy8vm1pEOj4luyGSQnjMEfHkWQMDvqLijHPEQgFN62OAwckADOWZJfS/nmyoRA/GGV/EBw3b86cNrIpT4HSSbEzKsIyDgX6HMRQ=
    # NPM_TOKEN
    - secure: C0SWKQBQWCVscsTZLgiaErCF4mykPs4PGwjURKBJ+myZswUlO4QG4QxnoK4FWr5eCeV6WaNAHcw5JOtG0ffK1jSv2OfIR9COGDcKxkka/zIt811zXBBrfDbqgkxwEbEL/BHFg8aUdLTZGfA6yjM9wHas+oN0YMqNXzRmAQui3ORdyp/5VUdYzCYmnh3mhh4dbguNJy/sS07N8GB3+vrbUlwU6PzdDFdASH8O2o0Mc0L6cpDa4joJj07q7z5+Q2UUAcEHhqULdeMFxLWcAz4Eh2LI7iko7n8gMauSdbcl00sv4MUmpq9XCRg1ZYh5VGTsL2+xC24skf8xR2DtzInnrHd8A/4zD3+DWcZVE7QM12I2xkLVwtAImUizyF4rA4OkJyY2/FLPSWhmleA06QRNuUsxrs/U1mGk2irjFY+oi4ekZrBbt2HN8pSTB6u78p3e+NTbnzHRFsdZf2OW9xKe/9TSRSwCI3zOwXo+fsJN3GzIkalIheb1bo3TonlKSzsnVe6i882va5mn6lhjl5082kxpTBIdumyIXoNcGkOFkpEQ80a7mvSpHeQrojVPe9Hk3aHvvsoIzlha/k/dhYeIy9pm5QKPithBTpTxL874sA5pckEJsaTgX/oi85xE8EHEnRUp3UEEB9BKO3Ko/hj5t6WpnDsRgHu1CYzhau0DMw4=

deploy:
  skip_cleanup: true
  provider: script
  script: utils/release.sh
  on:
    repo: Dreamscapes/atom-ide-mocha-core
    tags: true
    node_js: '10'
